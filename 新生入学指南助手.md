#  è¿›é˜¶-çŸ¥è¯†åº“ï¼šæ–°ç”Ÿå…¥å­¦æŒ‡å—åŠ©æ‰‹ 
åˆšå…¥æ ¡å›­ï¼Œå¸Œæœ›èƒ½æœ‰å°åŠ©æ‰‹å¸®æˆ‘ä»¬å¿«é€Ÿäº†è§£å­¦ç”Ÿæ‰‹å†Œï¼Œè¿™éœ€è¦æˆ‘ä»¬å¸¸è¯´çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰äº†ã€‚æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ˜¯ä¸€ç§é€šè¿‡å°†è¯­è¨€æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®æºç›¸ç»“åˆçš„æŠ€æœ¯ï¼Œæ•´ä¸ª RAG ç³»ç»Ÿä¸»è¦åŒ…å«ä¸¤æ¡æ ¸å¿ƒå·¥ä½œæµï¼š

- å·¥ä½œæµä¸€ï¼šæ•°æ®å†™å…¥å‘é‡æ•°æ®åº“ (æ„å»ºçŸ¥è¯†åº“)
- å·¥ä½œæµäºŒï¼šç»“åˆçŸ¥è¯†åº“è¿›è¡Œé—®ç­” (RAG æŸ¥è¯¢)
# ä¸€ã€åˆ›å»ºçŸ¥è¯†åº“
## æ·»åŠ æ–‡ä»¶ä¸Šä¼ èŠ‚ç‚¹
æˆ‘ä»¬éœ€è¦å…ˆæ·»åŠ ä¸€ä¸ªâ€œè§¦å‘èŠ‚ç‚¹â€ï¼Œå› ä¸ºéœ€è¦ä¸Šä¼ pdfï¼Œæˆ‘ä»¬é€‰æ‹©è¡¨å•è§¦å‘èŠ‚ç‚¹â€œOn form submissionâ€ä½œä¸ºæµç¨‹èµ·ç‚¹
![add submission](static/add_submission.png)
æ·»åŠ èŠ‚ç‚¹åï¼Œç‚¹å‡»è¯¥èŠ‚ç‚¹é…ç½®å‚æ•°ï¼š
- Form Title & Form Description: æ˜¯è¯¥è¡¨å•çš„åç§°å’Œæè¿°
- Field Nameï¼šä¸ºæ–‡ä»¶å­—æ®µå
- Element Typeï¼šé€‰æ‹©File
- Multiple Filesï¼šå¦‚æœå¼€å¯å¯ä»¥ä¸€æ¬¡ä¸Šä¼ å¤šä¸ªæ–‡ä»¶
- Accepted File Typesï¼šè¯¥å‚æ•°æ˜¯å¯æ”¯æŒæ–‡ä»¶ç±»å‹ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹ï¼Œæ–‡ä»¶ç±»å‹ä¹‹é—´ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼ˆä¾‹å¦‚ï¼š.pdf,.mdï¼‰

![parameter_submission](static/parameter_submission.png)

è®¾ç½®å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•è¯¥èŠ‚ç‚¹æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œï¼š

- ç‚¹è§£æµ‹è¯•æŒ‰é’®ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æµ‹è¯•æŒ‰é’®ç±»ä¼¼ç¼–ç¨‹ä¸­çš„debug)

![submission_test001](static/submission_test001.png)

- ä¸Šä¼ æ–‡æ¡£
  
![submission_test002](static/submission_test002.png)

- ä¸Šä¼ æˆåŠŸåå³ä¸‹è§’ä¼šæç¤ºèŠ‚ç‚¹æ“ä½œæˆåŠŸï¼Œå†æ¬¡ç‚¹å‡»â€œOn form submissionâ€èŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸Šä¼ æˆåŠŸçš„æ–‡æ¡£

![submission_test003](static/submission_test003.png)

## æ·»åŠ å‘é‡æ•°æ®åº“èŠ‚ç‚¹
åœ¨èŠ‚ç‚¹æœç´¢æ ä¸­æ£€ç´¢"vector"ä¼šæ˜¾ç¤ºn8næ”¯æŒçš„å‘é‡åº“ï¼Œpineconå’ŒQdrantæ¯”è¾ƒå¸¸ç”¨ï¼Œæœ¬æ¬¡ä½¿ç”¨çš„æ˜¯æœ€åŸºç¡€çš„å‘é‡èŠ‚ç‚¹çš„â€œSimple Vector Store"

![vector_DB](static/vector_DB.png)

ç‚¹å‡»æ·»åŠ â€œSimple Vector Store"èŠ‚ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶çš„æ˜¯PDFæ‰€ä»¥é€‰æ‹©â€œAdd documents to vector storeâ€

![simple_vector001](static/simple_vector001.png)

æ·»åŠ åï¼Œæ˜¯ä¸€ä¸ªæœªé…ç½®çš„å‘é‡èŠ‚ç‚¹ä¸ä¸Šä¸€ä¸ªæ–‡ä»¶æ¥å—èŠ‚ç‚¹ç›¸è¿
![simple_vector003](static/simple_vector003.png)

### é…ç½®å‘é‡èŠ‚ç‚¹å‚æ•°

ç‚¹å‡»æ–°å¢çš„å‘é‡èŠ‚ç‚¹ï¼Œéœ€è¦é…ç½®Memory Keyï¼Œè¯¥å‚æ•°æ˜¯æ¯ä¸ªå‘é‡åº“çš„UIDï¼ŒåæœŸRAGæŸ¥è¯¢éœ€è¦è¯¥å‚æ•°è¯†åˆ«éœ€è¦æŸ¥è¯¢çš„å‘é‡åº“ã€‚
![simple_vector002](static/simple_vector002.png)

ç‚¹å‡»å‘é‡èŠ‚ç‚¹å·¦ä¸‹æ–¹çš„â€œEmbeddingsâ€ï¼Œé…ç½®èŠ‚ç‚¹çš„å‘é‡æ¨¡å‹ï¼Œn8næä¾›çš„å‘é‡ä¸­å¤§éƒ¨åˆ†å›½å†…ä¸æ”¯æŒï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬é€‰æ‹©å®‰è£…ollamaï¼Œåœ¨æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªqwen3-embedding-4bå¹¶è°ƒç”¨ã€‚
![simple_vector004](static/simple_vector004.png)

### ollamaæœ¬åœ°éƒ¨ç½²qwen3-embedding-4b
1. ollama å®‰è£…ï¼Œå‚è€ƒï¼šhttps://www.runoob.com/ollama/ollama-install.html
2. åœ¨ollamaä¸­å¯¼å…¥qwen3-embedding-4bæ¨¡å‹
- ä¸‹è½½æ¨¡å‹çš„ggufæ–‡ä»¶ https://hf-mirror.com/Qwen/Qwen3-Embedding-4B-GGUF/tree/main

![Qwen_Embedding](static/Qwen_Embedding.png)

- å°†æ–‡ä»¶æ”¾ç½®åœ¨ä½ æŒ‡å®šçš„è·¯å¾„ä¸‹ï¼ˆè¯¥è·¯å¾„ä¸è¦å‡ºç°ä¸­æ–‡ï¼‰ä»¥â€œD:\modelâ€ä¸¾ä¾‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
```bash
echo FROM D:\model\Qwen3-Embedding-4B-Q4_K_M.gguf
echo PARAMETER modality text
echo TEMPLATE ""

cd /d D:\model
ollama create qwen3-embedding-4b -f Modelfile
```
- æ‰§è¡Œå®Œæˆåé€šè¿‡ ollama listæ£€éªŒæ˜¯å¦åŠ è½½æˆåŠŸï¼Œå¦‚æœæ‰§è¡Œåå‡ºç°â€œqwen3-embedding-4b:latestâ€å°±åŠ è½½æˆåŠŸ

### é…ç½®Embeddings
å®Œæˆä»¥åå¯ä»¥å›åˆ°n8nçš„â€œEmbeddingsâ€æ·»åŠ ï¼Œé€‰æ‹©â€œEmbedding Ollama",å†ç‚¹å‡»æ–°å¢çš„ â€œEmbedding Ollama"èŠ‚ç‚¹é…ç½®å‚æ•°:

- æœªé…ç½®è¿‡çš„éœ€è¦ç‚¹å‡»"Create new credential"æ·»åŠ 

![ollama001](static/ollama001.png)

- Base URLï¼šâ€œhttp://192.168.X.X:11434â€
> ğŸ’¡ Tip  
>â€œ192.168.X.Xâ€æ˜¯ä½ IPV4çš„åœ°å€ï¼Œå¦‚æœä¸çŸ¥é“å¯ä»¥é€šè¿‡åœ¨CMDä¸­æ‰§è¡ŒipconfigæŸ¥è¯¢ã€‚ï¼ˆè¿™é‡Œä¸ä½¿ç”¨localhostï¼Œæ˜¯å› ä¸ºåœ¨å®¹å™¨é‡ŒlocalhostæŒ‡å‘çš„æ˜¯å®¹å™¨è‡ªå·±ï¼Œè€Œä¸æ˜¯å®¿ä¸»æœº, åœ¨n8nä¸­ä¼šå‡ºç°æŠ¥é”™ï¼Œé“¾æ¥å¤±è¯¯)

- ç‚¹å‡»â€œretryâ€æµ‹è¯•æ˜¯å¦æˆåŠŸ

![ollama002](static/ollama002.png)

- æµ‹è¯•æˆåŠŸåï¼Œç­‰2-3så°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšåŠ è½½çš„æ¨¡å‹
  
![ollama003](static/ollama003.png)

### é…ç½®Document
è¯¥éƒ¨åˆ†ä¸»è¦ç”¨äºé…ç½®æ–‡æ¡£åˆ‡å‰²çš„å‚æ•°

åœ¨â€œDocumentâ€æ·»åŠ â€œDefault Data Loaderâ€

![document001](static/document001.png)

å¦‚å›¾é…ç½®â€œDefault Data Loaderâ€å‚æ•°ï¼š

![document002](static/document002.png)

ä¸ºâ€œDefault Data Loaderâ€æ·»åŠ æ–‡æ¡£åˆ†å‰²å™¨Recursive Character Text Splitterï¼š

![document003](static/document003.png)

é…ç½®â€œRecursive Character Text Splitterâ€å‚æ•°

- chunk sizeæ˜¯åˆ‡å‰²åæ¯ä¸ªæ–‡æ¡£çš„å¤§å°
- chunk overlapä¸ºåˆ‡å‰²åæ¯ä¸ªæ–‡æ¡£é‡å éƒ¨åˆ†å¤§å°ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å†³å®šã€‚

![document004](static/document004.png)

å®Œæˆä»¥ä¸Šé…ç½®ï¼Œæ‰§è¡Œexecute workflowï¼Œæ˜¾ç¤ºæ‰§è¡ŒæˆåŠŸï¼Œæ„å»ºçŸ¥è¯†åº“å°±å®Œæˆäº†

![DB_workflow001](static/DB_workflow001.png)

# äºŒã€RAGæŸ¥è¯¢

![RAG-workflow](static/RAG-workflow.png)

## æ·»åŠ ChatèŠ‚ç‚¹
åœ¨èŠ‚ç‚¹æœç´¢æ¡†ä¸­è¾“å…¥'Chat Trigger'å¹¶æ·»åŠ 

## æ·»åŠ AgentèŠ‚ç‚¹
åœ¨'Chat Trigger'ä¹‹åæ·»åŠ â€œAI Agent"èŠ‚ç‚¹

### é…ç½®Chatmodel

- æ·»åŠ æŸ¥è¯¢æ¨¡å‹ï¼Œä»¥deepseekä¸ºä¾‹

![chatmodel001](static/chatmodel001.png)

- é¦–æ¬¡é…ç½®éœ€è¦é€‰æ‹©â€œ+ Create new credentialâ€
  
![chatmodel002](static/chatmodel002.png)

- ç™»é™†deepseekå®˜ç½‘è·å–API-KEYå¹¶å¡«å…¥
  
![chatmodel003](static/chatmodel003.png)

- Modelè¦é€‰æ‹©chatæ¨¡å‹

![chatmodel004](static/chatmodel004.png)

### è¿æ¥å‘é‡åº“

æ·»åŠ â€œAnswer questions with a vector storeâ€èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹æŠŠã€Œå‘é‡æ•°æ®åº“ã€å°è£…æˆ LangChain Toolï¼Œä¾› AI Agent æˆ–é—®ç­”é“¾è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦å¯¹å…¶ä½œç”¨è¿›è¡Œè¯´æ˜ï¼Œlimitå‚æ•°ä»£è¡¨å•æ¬¡æ£€ç´¢è¿”å›çš„æ–‡æ¡£ç‰‡æ®µæ•°ï¼Œé»˜è®¤æ˜¯4ï¼Œâ€œAnswer questions with a vector storeâ€çš„æ¨¡å‹ä¹Ÿæ˜¯chatæ¨¡å‹ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶å’Œä¹‹å‰çš„deepseekè¿æ¥å°±å¥½ã€‚

![QA_Vector_Store](static/QA_Vector_Store.png)

åœ¨â€œAnswer questions with a vector storeâ€ä¸‹æ–¹æ·»åŠ "Simple Vectore Store"èŠ‚ç‚¹ï¼Œéœ€è¦æ³¨æ„â€œMemory Keyâ€è¦å’Œä¹‹å‰è®¾ç½®çš„ä¿æŒä¸€è‡´ï¼Œ"Simple Vectore Store"èŠ‚ç‚¹çš„embeddingæ¨¡å‹ä¹Ÿè¦å’Œä¹‹å‰çš„ä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥è¿æ¥ã€‚

![vector_store.png](static/vector_store.png)

å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œç‚¹å‡»â€œExecute Workflowâ€ï¼Œå†ç‚¹å‡»â€œOpen Chat"ï¼Œä¾¿å¯ä»¥è¯¢é—®ä½ çš„å°åŠ©æ‰‹äº†~

![complete.png](static/complete.png)
